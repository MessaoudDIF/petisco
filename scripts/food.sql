/******************************************************************************/
/*            Generated by IBExpert 2009.08.17 26/05/2016 09:42:35            */
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES WIN1252;

CREATE DATABASE '127.0.0.1:c:\wrk\db\food\FOOD.FDB'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 16384
DEFAULT CHARACTER SET WIN1252;



/******************************************************************************/
/*                                 Generators                                 */
/******************************************************************************/

CREATE GENERATOR OIDS;
SET GENERATOR OIDS TO 78;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/



CREATE TABLE CART (
    CART_OID  CHAR(14) NOT NULL,
    CART_COD  VARCHAR(20),
    CART_DES  VARCHAR(20),
    CART_DC   INTEGER
);

CREATE TABLE CL (
    CL_OID     CHAR(14) NOT NULL,
    CL_COD     VARCHAR(20) NOT NULL,
    CL_NOME    VARCHAR(40) NOT NULL,
    CL_FONE    VARCHAR(20),
    CL_CIDADE  VARCHAR(40),
    CL_UF      CHAR(2),
    CL_CEP     CHAR(8),
    CL_ENDER   VARCHAR(40),
    CL_BAIRRO  VARCHAR(40),
    CL_NUM     INTEGER,
    CL_COMPL   VARCHAR(20),
    CL_RG      VARCHAR(20),
    CL_CPF     VARCHAR(11)
);

CREATE TABLE COMA (
    COMA_OID      VARCHAR(14) NOT NULL,
    CL_OID        CHAR(14),
    COMA_COMANDA  VARCHAR(14) NOT NULL,
    COMA_DATA     TIMESTAMP NOT NULL,
    COMA_CONSUMO  DECIMAL(8,2),
    COMA_TXSERV   DECIMAL(8,2),
    COMA_TOTAL    DECIMAL(8,2) NOT NULL,
    COMA_SALDO    DECIMAL(8,2),
    COMA_STT      INTEGER NOT NULL,
    COMA_MESA     INTEGER
);

CREATE TABLE COMAI (
    COMAI_OID    CHAR(14) NOT NULL,
    COMA_OID     VARCHAR(14) NOT NULL,
    GAR_OID      CHAR(14),
    PRO_OID      CHAR(14) NOT NULL,
    COMAI_UNIT   DECIMAL(8,2) NOT NULL,
    COMAI_QTDE   DECIMAL(8,2),
    COMAI_TOTAL  DECIMAL(8,2) NOT NULL,
    COMAI_EDT    INTEGER
);

CREATE TABLE COMAP (
    COMAP_OID    CHAR(14) NOT NULL,
    COMA_OID     CHAR(14),
    COMAP_DC     INTEGER,
    COMAP_VALOR  DECIMAL(8,2),
    COMAP_HIST   VARCHAR(20)
);

CREATE TABLE ESCLR (
    ESCLR  INTEGER
);

CREATE TABLE GAR (
    GAR_OID   CHAR(14) NOT NULL,
    GAR_COD   VARCHAR(20),
    GAR_NOME  VARCHAR(60)
);

CREATE TABLE MCX (
    MCX_OID        CHAR(14) NOT NULL,
    MCX_DATA       TIMESTAMP NOT NULL,
    MCX_TPORIG     INTEGER,
    MCX_ORIG       CHAR(14),
    MCX_VALOR      DECIMAL(8,2) NOT NULL,
    MCXOP_OID      CHAR(14),
    MCX_DB         INTEGER NOT NULL,
    MCX_HISTORICO  VARCHAR(40) NOT NULL,
    MCX_MPAG       INTEGER,
    CART_OID       CHAR(14),
    MCX_TROCO      DECIMAL(8,2) NOT NULL
);

CREATE TABLE MCXOP (
    MCXOP_OID  CHAR(14) NOT NULL,
    MCXOP_COD  VARCHAR(20),
    MCXOP_DES  VARCHAR(30)
);

CREATE TABLE PRO (
    PRO_OID    CHAR(14) NOT NULL,
    PRO_COD    VARCHAR(20) NOT NULL,
    PRO_DES    VARCHAR(40) NOT NULL,
    PRO_CUSTO  DECIMAL(8,2) NOT NULL,
    PRO_VENDA  DECIMAL(8,2) NOT NULL,
    PRO_SALDO  DECIMAL(8,2)
);

CREATE TABLE PROCOM (
    PROCOM_OID   CHAR(14) NOT NULL,
    PRO_OID      CHAR(14),
    PROCOM_QTDE  DECIMAL(8,2)
);

INSERT INTO CART (CART_OID, CART_COD, CART_DES, CART_DC) VALUES ('1             ', 'Visa Electron', 'Visa Electron', 1);
INSERT INTO CART (CART_OID, CART_COD, CART_DES, CART_DC) VALUES ('2             ', 'Maestro', 'Maestro', 1);
INSERT INTO CART (CART_OID, CART_COD, CART_DES, CART_DC) VALUES ('3             ', 'Visa', 'Visa', 2);
INSERT INTO CART (CART_OID, CART_COD, CART_DES, CART_DC) VALUES ('4             ', 'Mastercard', 'Mastercard', 2);

COMMIT WORK;

INSERT INTO CL (CL_OID, CL_COD, CL_NOME, CL_FONE, CL_CIDADE, CL_UF, CL_CEP, CL_ENDER, CL_BAIRRO, CL_NUM, CL_COMPL, CL_RG, CL_CPF) VALUES ('1             ', 'HELSONSANT', 'HELSON C DOS SANTOS', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO CL (CL_OID, CL_COD, CL_NOME, CL_FONE, CL_CIDADE, CL_UF, CL_CEP, CL_ENDER, CL_BAIRRO, CL_NUM, CL_COMPL, CL_RG, CL_CPF) VALUES ('2             ', 'ZÉ FERREIRA', 'JOSÉ CARLOS DE ASSIS', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO CL (CL_OID, CL_COD, CL_NOME, CL_FONE, CL_CIDADE, CL_UF, CL_CEP, CL_ENDER, CL_BAIRRO, CL_NUM, CL_COMPL, CL_RG, CL_CPF) VALUES ('3             ', 'PEZÃO', 'FRANCISCO ALVES', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO CL (CL_OID, CL_COD, CL_NOME, CL_FONE, CL_CIDADE, CL_UF, CL_CEP, CL_ENDER, CL_BAIRRO, CL_NUM, CL_COMPL, CL_RG, CL_CPF) VALUES ('4             ', 'MUSSUM', 'ANTONIO CARLOS GOMES', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);

COMMIT WORK;

INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('1             ', '1', 'CERVEJA 1/2 MALZIBIER', 3.5, 6, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('2             ', '2', 'CERVEJA MALZIBIER', 4.5, 8, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('3             ', '3', 'CERVEJA LT SKOL', 3, 5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('4             ', '4', 'CERVEJA LT BRAHMA', 3, 5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('5             ', '5', 'CERVEJA SEM ÁLCOOL', 3, 5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('6             ', '6', 'CHOPP CLARO', 2.5, 4.5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('7             ', '7', 'CHOPP DE VINHO', 2.5, 5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('8             ', '8', 'REFRIGERANTE C/ LIMÃO', 3, 4.5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('9             ', '9', 'ENERGÉTICO ', 3, 6, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('10            ', '10', 'CERVEJA ITAIPAVA', 3, 5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('11            ', '11', 'SUCO DE LARANJA', 2, 4.5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('12            ', '12', 'SUCO DE POLPA DE FRUTA', 3, 5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('13            ', '13', 'REFRIGERANTE LATA', 2, 4.5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('14            ', '14', 'SALGADO FRITO', 2, 4.5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('15            ', '15', 'SALGADO ASSADO', 2, 4.5, NULL);
INSERT INTO PRO (PRO_OID, PRO_COD, PRO_DES, PRO_CUSTO, PRO_VENDA, PRO_SALDO) VALUES ('16            ', '16', 'H2OH', 2, 4, NULL);

COMMIT WORK;

INSERT INTO ESCLR (ESCLR) VALUES (1);

COMMIT WORK;



/******************************************************************************/
/*                                Primary Keys                                */
/******************************************************************************/

ALTER TABLE CART ADD PRIMARY KEY (CART_OID);
ALTER TABLE CL ADD PRIMARY KEY (CL_OID);
ALTER TABLE COMA ADD PRIMARY KEY (COMA_OID);
ALTER TABLE COMAI ADD PRIMARY KEY (COMAI_OID);
ALTER TABLE COMAP ADD PRIMARY KEY (COMAP_OID);
ALTER TABLE GAR ADD PRIMARY KEY (GAR_OID);
ALTER TABLE MCXOP ADD PRIMARY KEY (MCXOP_OID);
ALTER TABLE PRO ADD PRIMARY KEY (PRO_OID);
ALTER TABLE PROCOM ADD PRIMARY KEY (PROCOM_OID);


/******************************************************************************/
/*                                Foreign Keys                                */
/******************************************************************************/

ALTER TABLE COMA ADD CONSTRAINT R_2 FOREIGN KEY (CL_OID) REFERENCES CL (CL_OID);
ALTER TABLE COMAI ADD CONSTRAINT FK_COMAI_1 FOREIGN KEY (GAR_OID) REFERENCES GAR (GAR_OID);
ALTER TABLE COMAI ADD CONSTRAINT R_1 FOREIGN KEY (PRO_OID) REFERENCES PRO (PRO_OID);
ALTER TABLE COMAI ADD CONSTRAINT R_3 FOREIGN KEY (COMA_OID) REFERENCES COMA (COMA_OID);
ALTER TABLE COMAP ADD FOREIGN KEY (COMA_OID) REFERENCES COMA (COMA_OID);
ALTER TABLE MCX ADD FOREIGN KEY (MCXOP_OID) REFERENCES MCXOP (MCXOP_OID);
ALTER TABLE MCX ADD FOREIGN KEY (CART_OID) REFERENCES CART (CART_OID);
ALTER TABLE PROCOM ADD FOREIGN KEY (PRO_OID) REFERENCES PRO (PRO_OID);


/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/

CREATE INDEX CL_IDX_NOME ON CL (CL_NOME);
